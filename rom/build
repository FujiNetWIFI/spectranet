#!/bin/sh
# note, the order of ASMSOURCES is important.
ASMSOURCES=( sysvars rommodconfig_en rommodconfig_es datarom datarom_es \
             rom jumptable  \
	     configutilrom configutilrom_es \
	     configutil utilrom utilrom_es romimage romimage_es romprog \
	     romprog_es )

rm -f *.out
rm -f *.sym
rm -f *.lst

for src in ${ASMSOURCES[@]}
do
   echo "Assembling $src..."
   sjasmplus $src.asm --sym=$src.sym --lst=$src.lst >.output
   if [ "$?" != "0" ]; then
      echo
      echo "Assembly failed:"
      cat .output
      echo
      exit
   fi
done

