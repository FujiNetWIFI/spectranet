#!/bin/sh
# note, the order of ASMSOURCES is important.
ASMSOURCES=( sysvars datarom rom jumptable configutilrom configutil \
             utilrom romimage romprog )

rm -f *.out
rm -f *.sym
rm -f *.lst

for src in ${ASMSOURCES[@]}
do
   echo "Assembling $src..."
   sjasmplus $src.asm --sym=$src.sym --lst=$src.lst >.output
   if [ "$?" != "0" ]; then
      echo
      echo "Assembly failed:"
      cat .output
      echo
      exit
   fi
done

